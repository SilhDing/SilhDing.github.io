# 2 Protocol Stack

## Internet Application

Seemingly no special contents here...

## Internet Architecture

### Protocol

**Definition**: an agreement between parties on how communication should take place

### Layering Characteristics

- Each layer relies on services from layer below and exports services to layer above
- Interface defines interaction with peer on other hosts – called protocols
- Modules hide implementation - layers can change without disturbing other layers (black box)

**OSI Model**: 7 layers:
**Physical**: how to transmit bits
**Data link**: how to transmit frames
**Network**: how to route packets
**Transport**: how to send packets end2end
**Session**: how to tie flows together
**Presentation**: byte ordering, security
**Application**: everything else

![-w177](media/15486386819815/15486403162739.jpg)

### Application & Upper layers

- Application Layer: Provides services that are frequently required by applications: DNS, web acess, file transfer, email…
- Presentation Layer: machineindependent representation of data…
- Session Layer: dialog management, recovery from errors, …

**But the last two are mostly incorporated into application layer!**

### Multiplexing and Demultiplexing

There may be multiple implementations of each layer. How does the receiver know what version of a layer to use?

Each header includes a demultiplexing field that is used to identify the next layer. **Filled in the server and used by the receiver**

![-w739](media/15486386819815/15486408550983.jpg)

Consider the architecture in the well-known server-client mode: **Server and Client exchange messages over the network through a common Socket API**. Please note that the TCP/UDP/IP are working in kernel space (OS).

![-w718](media/15486386819815/15486409512170.jpg)

An interesting fact is the **Internet Protocol suite**. You could say IP is the compatibility layer: all hosts and routers run IP. It is also a stateless architecture (No per flow state inside network).

![-w700](media/15486386819815/15486411392130.jpg)

The waist facilitates interoperability but evolution is hard!

It is actually a **IP based on a Minimalist Approach**.

- Dumb network
    - IP provide minimal functionalities to support connectivity (Addressing, forwarding, routing)
- Smart end system
    - Transport layer or application performs more sophisticated functionalities (Flow control, error control, congestion control)
- Advantages
    - Accommodate heterogeneous technologies (Ethernet, modem, satellite, wireless)
    - Support diverse applications (telnet, ftp, Web, X windows)
    - Decentralized network administration

### Network tools

Cmds: `ping, traceroute, ipconfig, tcpdump`..

Introduction of some of them:

- `ping`
    - to determine if host is reachable
    - based on ICMP protocol
- `traceroute`
    - route from local host to a remote host
    - Time-to-Live (TTL)
        - IP packets have TTL field that specifies maximum # hops traversed before packet discarded
        - Each router decrements TTL by 1
        - When TTL reaches 0 packet is discarded
    - Traceroute
        - Send UDP to remote host with TTL=1
        - First router will reply ICMP Time Exceeded Message
        - Send UDP to remote host with TTL=2, …
        - Each step reveals next router in path to remote host
- `ipconfig`
    - Utility in Microsoft Windows to display **TCP/IP** information about a host
- `tcpdump`
    - captures IP packets on a network interface
    - basis for many network protocol analyzers for troubleshooting networks

Please also refer to slide for an example of network protocol analyzer.