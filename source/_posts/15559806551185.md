# Some points for final exams

![-w946](media/15559806551185/15559806712242.jpg)


## Path vector in BGP

How does it work? See the textbook.

## How does iBGP differ from eBGP

![-w832](media/15559806551185/15560677883548.jpg)


## Transport layer

- lowest level end-to-end protocol;
    - Header generated by sender is interpreted only by the destination
- ACK policies:
    - **one for one**: inefficiency, too much ACK messages
    - **cumulative acks**: acks acknowledge all packets up to a specific packet, may stalls the pipes and go-back-N issue
        - Go-back-N: sender sends 5 packages, why the third one is lost; receiver only returns acks for the first and second packages; send could only send all last 3 packages (after timeout).
    - **negative acks**: allow a receiver to ask for a packet that is (presumed to be) lost (no need for delay)
    - **Go-Back-N Variant**: 
        - Duplicate acks sent when out-of-order packet received
            - sender only retransmits a single packet (only one is known to be lost; imply congestion, cannot send many)
        - also called fast retransmit: no need to wait for timeout
            - Assume re-ordering is infrequent and not of large magnitude; Receipt of 3 or more duplicate acks viewed as sign of a loss
            - what if loss is frequent? then just use timeout
        - SACK: cumulative ACKs provide little information
            - selective ACKs adds a bitmask of package received (TCP option)
            - Still need to deal with reordering -> wait for out of order by 3 pkts 

- Congestion control
    - package conservation: never more than a window worth of packets in flight
        - At equilibrium, inject packet into network only when one is removed
        - controlled by sliding window
    - spurious retransmissions: The sender thinks the pkg is lost and then retransmits it while in fact it is not and ACK is still in transit. This is due to the changed RTT.
        - eliminate it: accurate RTO estimation
        - Better loss recovery techniques (e.g. fast retransmit)
    - Fast recovery
    - ![-w1004](media/15559806551185/15561362341871.jpg)

        - Fast recovery is not hard to understand, but now we have more than new_cwd (old_cwd/2) pkgs in flight, so we have to wait them clear the network, which means we have to wait for cwd/2 duplicate acks.


- Router Buffer
    - I do not understand this slide
    - ![-w941](media/15559806551185/15561496263889.jpg)


- Some TCP reality
- ![-w801](media/15559806551185/15562207412494.jpg)


- web with cache: some calculations
- ![-w932](media/15559806551185/15562209494315.jpg)

- Tor and Skype
    - Lecture 22, see it again

- Content delivery in CDN
    - ![-w805](media/15559806551185/15562401876290.jpg)
    - ![-w787](media/15559806551185/15562405306140.jpg)
